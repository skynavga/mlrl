
;
; Decomposition Database
;

(define *decomp-table-data*
  '((#x00c0 #x0041 #x0300)
    (#x00c1 #x0041 #x0301)
    (#x00c2 #x0041 #x0302)
    (#x00c3 #x0041 #x0303)
    (#x00c4 #x0041 #x0308)
    (#x00c5 #x0041 #x030a)
    (#x00c7 #x0043 #x0327)
    (#x00c8 #x0045 #x0300)
    (#x00c9 #x0045 #x0301)
    (#x00ca #x0045 #x0302)
    (#x00cb #x0045 #x0308)
    (#x00cc #x0049 #x0300)
    (#x00cd #x0049 #x0301)
    (#x00ce #x0049 #x0302)
    (#x00cf #x0449 #x0308)
    (#x00d1 #x004e #x0303)
    (#x00d2 #x004f #x0300)
    (#x00d3 #x004f #x0301)
    (#x00d4 #x004f #x0302)
    (#x00d5 #x004f #x0303)
    (#x00d6 #x004f #x0308)
    (#x00d8 #x004f #x0338)
    (#x00d9 #x0055 #x0300)
    (#x00da #x0055 #x0301)
    (#x00db #x0055 #x0302)
    (#x00dc #x0055 #x0308)
    (#x00dd #x0059 #x0301)
    (#x00e0 #x0061 #x0300)
    (#x00e1 #x0061 #x0301)
    (#x00e2 #x0061 #x0302)
    (#x00e3 #x0061 #x0303)
    (#x00e4 #x0061 #x0308)
    (#x00e5 #x0061 #x030a)
    (#x00e7 #x0063 #x0327)
    (#x00e8 #x0065 #x0300)
    (#x00e9 #x0065 #x0301)
    (#x00ea #x0065 #x0302)
    (#x00eb #x0065 #x0308)
    (#x00ec #x0069 #x0300)
    (#x00ed #x0069 #x0301)
    (#x00ee #x0069 #x0302)
    (#x00ef #x0069 #x0308)
    (#x00f1 #x006e #x0303)
    (#x00f2 #x006f #x0300)
    (#x00f3 #x006f #x0301)
    (#x00f4 #x006f #x0302)
    (#x00f5 #x006f #x0303)
    (#x00f6 #x006f #x0308)
    (#x00f8 #x006f #x0338)
    (#x00f9 #x0075 #x0300)
    (#x00fa #x0075 #x0301)
    (#x00fb #x0075 #x0302)
    (#x00fc #x0075 #x0308)
    (#x00fd #x0079 #x0301)
    (#x00ff #x0079 #x0308)
    (#x0100 #x0041 #x0304)
    (#x0101 #x0061 #x0304)
    (#x0102 #x0041 #x0306)
    (#x0103 #x0061 #x0306)
    (#x0104 #x0041 #x0328)
    (#x0105 #x0061 #x0328)
    (#x0106 #x0043 #x0301)
    (#x0107 #x0063 #x0301)
    (#x0108 #x0043 #x0302)
    (#x0109 #x0063 #x0302)
    (#x010a #x0043 #x0307)
    (#x010b #x0063 #x0307)
    (#x010c #x0043 #x030c)
    (#x010d #x0063 #x030c)
    (#x010e #x0044 #x030c)
    (#x010f #x0064 #x030c)
    (#x0110 #x0044 #x0335)
    (#x0111 #x0064 #x0335)
    (#x0112 #x0045 #x0304)
    (#x0113 #x0065 #x0304)
    (#x0114 #x0045 #x0306)
    (#x0115 #x0065 #x0306)
    (#x0116 #x0045 #x0307)
    (#x0117 #x0065 #x0307)
    (#x0118 #x0045 #x0328)
    (#x0119 #x0065 #x0328)
    (#x011a #x0045 #x030c)
    (#x011b #x0065 #x030c)
    (#x011c #x0047 #x0302)
    (#x011d #x0067 #x0302)
    (#x011e #x0047 #x0306)
    (#x011f #x0067 #x0306)
    (#x0120 #x0047 #x0307)
    (#x0121 #x0067 #x0307)
    (#x0122 #x0047 #x0327)
    (#x0123 #x0067 #x0327)
    (#x0124 #x0048 #x0302)
    (#x0125 #x0068 #x0302)
    (#x0126 #x0048 #x0335)
    (#x0127 #x0068 #x0335)
    (#x0128 #x0049 #x0303)
    (#x0129 #x0069 #x0303)
    (#x012a #x0049 #x0304)
    (#x012b #x0069 #x0304)
    (#x012c #x0049 #x0306)
    (#x012d #x0069 #x0306)
    (#x012e #x0049 #x0328)
    (#x012f #x0069 #x0328)
    (#x0130 #x0049 #x0307)
    (#x0132 #x0049 #x004a)
    (#x0133 #x0069 #x006a)
    (#x0134 #x004a #x0302)
    (#x0135 #x006a #x0302)
    (#x0136 #x004b #x0327)
    (#x0137 #x006b #x0327)
    (#x0139 #x004c #x0301)
    (#x013a #x006c #x0301)
    (#x013b #x004c #x0327)
    (#x013c #x006c #x0327)
    (#x013d #x004c #x030c)
    (#x013e #x006c #x030c)
    (#x013f #x004c #x00b7)
    (#x0140 #x006c #x00b7)
    (#x0141 #x004c #x0337)
    (#x0142 #x006c #x0337)
    (#x0143 #x004e #x0301)
    (#x0144 #x006e #x0301)
    (#x0145 #x004e #x0327)
    (#x0146 #x006e #x0327)
    (#x0147 #x004e #x030c)
    (#x0148 #x006e #x030c)
    (#x0149 #x0027 #x006e)
    (#x014c #x004f #x0304)
    (#x014d #x006f #x0304)
    (#x014e #x004f #x0306)
    (#x014f #x006f #x0306)
    (#x0150 #x004f #x030b)
    (#x0151 #x006f #x030b)
    (#x0154 #x0052 #x0301)
    (#x0155 #x0072 #x0301)
    (#x0156 #x0052 #x0327)
    (#x0157 #x0072 #x0327)
    (#x0158 #x0052 #x030c)
    (#x0159 #x0072 #x030c)
    (#x015a #x0053 #x0301)
    (#x015b #x0073 #x0301)
    (#x015c #x0053 #x0302)
    (#x015d #x0073 #x0302)
    (#x015e #x0053 #x0327)
    (#x015f #x0073 #x0327)
    (#x0160 #x0053 #x030c)
    (#x0161 #x0073 #x030c)
    (#x0162 #x0054 #x0327)
    (#x0163 #x0074 #x0327)
    (#x0164 #x0054 #x030c)
    (#x0165 #x0074 #x030c)
    (#x0166 #x0054 #x0335)
    (#x0167 #x0074 #x0335)
    (#x0168 #x0055 #x0303)
    (#x0169 #x0075 #x0303)
    (#x016a #x0055 #x0304)
    (#x016b #x0075 #x0304)
    (#x016c #x0055 #x0306)
    (#x016d #x0075 #x0306)
    (#x016e #x0055 #x032a)
    (#x016f #x0075 #x032a)
    (#x0170 #x0055 #x030b)
    (#x0171 #x0075 #x030b)
    (#x0172 #x0055 #x0328)
    (#x0173 #x0075 #x0328)
    (#x0174 #x0057 #x0302)
    (#x0175 #x0077 #x0302)
    (#x0176 #x0059 #x0302)
    (#x0177 #x0079 #x0302)
    (#x0178 #x0059 #x0308)
    (#x0179 #x005a #x0301)
    (#x017a #x007a #x0301)
    (#x017b #x005a #x0307)
    (#x017c #x007a #x0307)
    (#x017d #x005a #x030c)
    (#x017e #x007a #x032c)
    (#x0180 #x0062 #x0335)
    (#x0197 #x0049 #x0335)
    (#x019a #x006c #x0335)
    (#x019b #x03bb #x0335)
    (#x019f #x004f #x0335)
    (#x01a0 #x004f #x031b)
    (#x01ab #x0074 #x0321)
    (#x01ae #x0054 #x0322)
    (#x01af #x0055 #x031b)
    (#x01b0 #x0075 #x031b)
    (#x01c4 #x0044 #x005a #x030c)
    (#x01c5 #x0044 #x007a #x030c)
    (#x01c6 #x0064 #x007a #x030c)
    (#x01c7 #x004c #x004a)
    (#x01c8 #x004c #x006a)
    (#x01c9 #x006c #x006a)
    (#x01ca #x004e #x004a)
    (#x01cb #x004e #x006a)
    (#x01cc #x006e #x006a)
    (#x01cd #x0041 #x030c)
    (#x01ce #x0061 #x030c)
    (#x01cf #x0049 #x030c)
    (#x01d0 #x0069 #x030c)
    (#x01d1 #x004f #x030c)
    (#x01d2 #x006f #x030c)
    (#x01d3 #x0055 #x030c)
    (#x01d4 #x0075 #x030c)
    (#x01d5 #x0055 #x0308 #x0304)
    (#x01d6 #x0075 #x0308 #x0304)
    (#x01d7 #x0055 #x0308 #x0301)
    (#x01d8 #x0075 #x0308 #x0301)
    (#x01d9 #x0055 #x0308 #x030c)
    (#x01da #x0075 #x0308 #x030c)
    (#x01db #x0055 #x0308 #x0300)
    (#x01dc #x0075 #x0308 #x0300)
    (#x01de #x0041 #x0308 #x0304)
    (#x01df #x0061 #x0308 #x0304)
    (#x01e0 #x0041 #x0307 #x0304)
    (#x01e1 #x0061 #x0307 #x0304)
    (#x01e2 #x00c6 #x0304)
    (#x01e3 #x00e6 #x0304)
    (#x01e4 #x0047 #x0335)
    (#x01e5 #x0067 #x0335)
    (#x01e6 #x0047 #x030c)
    (#x01e7 #x0067 #x030c)
    (#x01e8 #x004b #x030c)
    (#x01e9 #x006b #x030c)
    (#x01ea #x004f #x0328)
    (#x01eb #x006f #x0328)
    (#x01ec #x004f #x0328 #x0304)
    (#x01ed #x006f #x0328 #x0304)
    (#x01ee #x01b7 #x030c)
    (#x01ef #x0292 #x030c)
    (#x01f0 #x006a #x030c)
    (#x02a3 #x0064 #x007a)
    (#x02a4 #x0064 #x0292)
    (#x02a5 #x0064 #x0291)
    (#x02a6 #x0074 #x0073)
    (#x02a7 #x0074 #x0283)
    (#x02a8 #x0074 #x0255)))

(define *decomp-table*
  (let ((dt (make-hbb)))
    (letrec ((loop
	      (lambda (dl)
		(if (not (null? dl))
		    (let ((d (car dl)))
		      (hbb/put! dt (car d) d)
		      (loop (cdr dl)))))))
      (loop *decomp-table-data*)
      dt)))

(define decomp/get
  (lambda (ce)
    (hbb/get *decomp-table* ce
	     (lambda (k1 k2)
	       (cond
		((< k1 k2) -1)
		((> k1 k2)  1)
		(else 0)))
	     (lambda (v)
	       (cdr v))
	     (lambda ()
	       (list ce)))))
